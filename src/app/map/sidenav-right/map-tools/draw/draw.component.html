<mat-accordion class="accordion-draw">
  <mat-expansion-panel class="no_shadow" [expanded]="true"
    style="margin-bottom: 15px; border-radius: 4px;position: relative;">

    <div class="accordion-draw-loading">
      <div style="position:absolute;top:calc(50% - 30px);left:30%">
        <div class="lds-ripple" style="width: 100px;
			height: 100px;">
          <div></div>
          <div></div>
        </div>
      </div>
    </div>

    <mat-expansion-panel-header expandedHeight="40px" collapsedHeight="40px" style="padding-left: 15px;"
      class="primary_transparent_bg">
      <mat-panel-title>
        <svg x="0px" y="0px" viewBox="0 0 21.5 20.4" style="width: 17.5px; height: 20.4px; margin-right: 10px;">
          <path class="primaryColorFill" d="M8.8,20.2c2-0.8,1.6-3,0.6-4.4c-1.1-1.3-2.3-2.5-3.8-3.3c-1-0.6-1.9-1.4-2.6-2.3
C2.6,9.8,1.9,9.1,2.6,9S4.4,9.5,5,9.7c1,0.4,2,0.9,3,1.5l1.1-1.9C7.3,8.1,5.2,7.2,3,6.8C1.8,6.7,0.5,6.9,0.1,8.2
c-0.2,1.1,0.1,2.3,0.9,3.1c1.5,2.1,4,3.1,5.8,4.9c0.4,0.4,0.8,0.8,1.1,1.3C8.1,18,8,18.1,7.5,18.1c-1.4,0-3.2-1.1-4.3-1.8L2,18.2
C3.8,19.2,6.6,20.9,8.8,20.2 M21.3,2.5c0.2-0.2,0.2-0.6,0-0.9c0,0,0,0,0,0l-1.5-1.5c-0.2-0.2-0.6-0.2-0.9,0l-1.1,1.2l2.4,2.4
M10.2,9v2.4h2.4l7-7L17.1,2L10.2,9z" />
        </svg>

        <span class="primaryColor">
          {{ "right_menu.tools.draw.title" | translate }}
        </span>
      </mat-panel-title>
    </mat-expansion-panel-header>

    <div class="button-row button-draw">
      <button matTooltip="{{ 'right_menu.tools.draw.toolpit_polygone' | translate }}" mat-mini-fab
        (click)="toogleAddDraw('Polygon')" [ngClass]="{
          blackBG: getDrawTool('Polygon').active,
          primary_transparent_bg: !getDrawTool('Polygon').active
        }">
        <svg style="margin-bottom: 2px; height: 20px;" x="0px" y="0px" viewBox="0 0 21.8 24.4">
          <g>
            <g id="Groupe_1852">
              <g id="Groupe_125" transform="translate(0 0)">
                <g id="Groupe_124">
                  <path [ngClass]="{
                      whiteFill: getDrawTool('Polygon').active,
                      primaryColorFill: !getDrawTool('Polygon').active
                    }" d="M21,4.1h-2.8c-0.5,0-0.9,0.4-0.9,0.9v1l0,0l-3.1,2.3V8.1c0-0.5-0.4-0.9-0.9-0.9h-2.8
    c-0.4,0-0.7,0.3-0.8,0.7L5.6,3.6V0.9C5.6,0.4,5.2,0,4.7,0H1.9C1.4,0,1,0.4,1.1,0.9v3c0,0.5,0.4,0.9,0.9,0.9h0.3L1.4,19.6H0.9
    C0.4,19.6,0,20,0,20.5v3c0,0.5,0.4,0.9,0.9,0.9h2.8c0.5,0,0.9-0.4,0.9-0.9v-0.7l11.7-2.6v0.4c0,0.5,0.4,0.9,0.9,0.9h2.8
    c0.5,0,0.9-0.4,0.9-0.9c0,0,0,0,0,0v-3c0-0.5-0.4-0.9-0.9-0.9h-0.3l0.7-7.8H21c0.5,0,0.9-0.4,0.9-0.9V5
    C21.8,4.5,21.5,4.1,21,4.1 M11,8.6h1.9v0.6l0,0v0v1.4H11V8.6z M2.4,1.4h1.9v2.1H2.4V1.4z M3.2,23H1.3v-2.1h1.9V23z M19.5,20.1
    h-1.9V18h1.9L19.5,20.1z M18.1,16.7h-1c-0.5,0-0.9,0.4-0.9,0.9v0.9L4.5,21v-0.6c0-0.5-0.4-0.9-0.9-0.9H3L3.7,4.8h0.8l5.1,5.4
    v0.9c0,0.5,0.4,0.9,0.9,0.9h2.8c0.5,0,0.9-0.4,0.9-0.9v-0.8l3.1-2.3v0c0,0.5,0.4,0.9,0.9,0.9h0.6L18.1,16.7z M20.5,7.5h-1.9V5.5
    h1.9V7.5z" />
                </g>
              </g>
            </g>
          </g>
        </svg>
      </button>

      <button matTooltip="{{ 'right_menu.tools.draw.toolpit_ligne' | translate }}" mat-mini-fab
        (click)="toogleAddDraw('LineString')" [ngClass]="{
          blackBG: getDrawTool('LineString').active,
          primary_transparent_bg: !getDrawTool('LineString').active
        }">
        <svg style="margin-bottom: 2px; height: 20px;" x="0px" y="0px" viewBox="0 0 24.2 24.9">
          <path [ngClass]="{
              whiteFill: getDrawTool('LineString').active,
              primaryColorFill: !getDrawTool('LineString').active
            }" d="M23,0h-2.2c-0.6,0-1.2,0.5-1.2,1.2v0v2.2c0,0,0,0.1,0,0.1L3.3,20.4H1.2
c-0.6,0-1.2,0.5-1.2,1.2v0v2.2c0,0.6,0.5,1.2,1.2,1.2l0,0h2.2c0.6,0,1.2-0.5,1.2-1.2v-2.2c0,0,0-0.1,0-0.1L20.8,4.5H23
c0.6,0,1.2-0.5,1.2-1.2V1.2C24.2,0.5,23.6,0,23,0L23,0z M3.3,23.7H1.2v-2.2h2.2V23.7z M23,3.3h-2.2V1.2H23V3.3z" />
        </svg>
      </button>

      <button matTooltip="{{ 'right_menu.tools.draw.toolpit_text' | translate }}" mat-mini-fab color="primary"
        (click)="toogleAddDraw('Point')" [ngClass]="{
          blackBG: getDrawTool('Point').active,
          primary_transparent_bg: !getDrawTool('Point').active
        }">
        <svg style="margin-bottom: 2px; height: 17px;" x="0px" y="0px" viewBox="0 0 23 18.1">
          <path [ngClass]="{
              whiteFill: getDrawTool('Point').active,
              primaryColorFill: !getDrawTool('Point').active
            }" d="M0,0v3.6h6v14.5h3.6V3.6h6V0H0z M23,6H12.1v3.6h3.6v8.5h3.6V9.7H23V6z" />
        </svg>
      </button>
    </div>

    <div class="button-row button-draw-edit" *ngIf="modifyTool.active">
      <div class="button-draw-edit-line primaryColorBorder"></div>

      <button matTooltip="{{
          'right_menu.tools.draw.toolpit_edit_geometry' | translate
        }}" mat-mini-fab color="accent" (click)="modifyDraw('geometry')"
        [ngClass]="{ blackBG: getModifyTool('geometry').active }">
        <img src="assets/icones/edite.svg" style="margin-bottom: 2px; height: 17px;" />
      </button>

      <button matTooltip="{{ 'right_menu.tools.draw.toolpit_edit_text' | translate }}" mat-mini-fab color="accent"
        (click)="modifyDraw('comment')" [ngClass]="{ blackBG: getModifyTool('comment').active }">
        <img src="assets/icones/text-edit-cursor.svg" style="margin-bottom: 2px; height: 17px;" />
      </button>

      <button matTooltip="{{
          'right_menu.tools.draw.toolpit_edit_color' | translate
        }}" mat-mini-fab color="accent" (click)="modifyDraw('color')"
        [ngClass]="{ blackBG: getModifyTool('color').active }">
        <img src="assets/icones/paint.svg" style="margin-bottom: 2px; height: 17px;" />
      </button>

      <button matTooltip="{{
          'right_menu.tools.draw.toolpit_edit_delete' | translate
        }}" mat-mini-fab color="accent" (click)="modifyDraw('delete')"
        [ngClass]="{ blackBG: getModifyTool('delete').active }">
        <img src="assets/icones/delete.svg" style="margin-bottom: 2px; height: 17px;" />
      </button>
    </div>

    <div class="button-row button-draw-list" fxLayout="row" fxLayoutAlign="end end">
      <svg fxFlex="20px" style="height: 20px; margin-left: 10px;" fxFlexAlign="end" x="0px" y="0px"
        viewBox="0 0 24.7 24.5" (click)="toogleModifyDraw()" class="pointer"
        matTooltip="{{ 'right_menu.tools.draw.toolpit_edit' | translate }}">
        <g id="Groupe_2939" transform="translate(-314.244 -151.105)">
          <path [ngClass]="{
              accentColorFill: modifyTool.active,
              primaryColorFill: !modifyTool.active
            }" d="M319.2,172.3V172c0-0.7-0.6-1.3-1.3-1.3c0,0,0,0,0,0h-0.3V156h0.3c0.7,0,1.3-0.6,1.3-1.3
c0,0,0,0,0,0v-0.3h14.7v0.3c0,0.7,0.6,1.3,1.3,1.3c0,0,0,0,0,0h0.3v4.2c0.6,0.2,1.2,0.4,1.7,0.7V156h0.3c0.7,0,1.3-0.6,1.3-1.3
c0,0,0,0,0,0v-2.4c0-0.7-0.6-1.3-1.3-1.3c0,0,0,0,0,0h-2.4c-0.7,0-1.3,0.6-1.3,1.3v0v0.3h-14.7v-0.3c0-0.7-0.6-1.3-1.3-1.3
c0,0,0,0,0,0h-2.4c-0.7,0-1.3,0.6-1.3,1.3v0v2.4c0,0.7,0.6,1.3,1.3,1.3c0,0,0,0,0,0h0.3v14.7h-0.3c-0.7,0-1.3,0.6-1.3,1.3v0v2.4
c0,0.7,0.6,1.3,1.3,1.3c0,0,0,0,0,0h2.4c0.7,0,1.3-0.6,1.3-1.3c0,0,0,0,0,0V174h4.9c-0.3-0.5-0.5-1.1-0.7-1.7L319.2,172.3z
M335.1,152.4h2.4v2.4h-2.4V152.4z M315.5,154.7v-2.4h2.4v2.4H315.5z M317.9,174.4h-2.4V172h2.4V174.4z" />
          <path id="TracÃ©_1081" [ngClass]="{
              accentColorFill: modifyTool.active,
              primaryColorFill: !modifyTool.active
            }" d="M338.7,164.4l-2.5-2.5c-0.1-0.1-0.3-0.2-0.5-0.2c-0.2,0-0.4,0.1-0.5,0.2l-9.8,9.9v3.5h3.6
l9.8-9.9c0.1-0.1,0.2-0.3,0.2-0.5C339,164.7,338.9,164.5,338.7,164.4z" />
        </g>
      </svg>

      <svg fxFlex="20px" style="height: 20px; margin-left: 10px;" fxFlexAlign="end" x="0px" y="0px"
        viewBox="0 0 16.8 18.6" (click)="shareAllDraw()" class="pointer"
        matTooltip="{{ 'right_menu.tools.draw.toolpit_share' | translate }}">
        <g transform="translate(-176.454 0.477)">
          <path class="primaryColorFill" d="M190.4,12.7c-0.7,0-1.3,0.3-1.8,0.7L182,9.5c0.1-0.2,0.1-0.4,0.1-0.7c0-0.2,0-0.4-0.1-0.7l6.6-3.8
c1.1,1.1,2.9,1,3.9-0.1c0.5-0.5,0.8-1.2,0.8-1.9c0-1.5-1.2-2.8-2.7-2.8c-1.5,0-2.8,1.2-2.8,2.7c0,0,0,0.1,0,0.1
c0,0.2,0,0.4,0.1,0.7l-6.6,3.8c-1.1-1.1-2.9-1-4,0.1c-1.1,1.1-1,2.9,0.1,4c1.1,1,2.8,1,3.8,0l6.6,3.9c0,0.2-0.1,0.4-0.1,0.6
c0,1.5,1.2,2.7,2.7,2.7s2.7-1.2,2.7-2.7C193.1,13.9,191.9,12.7,190.4,12.7L190.4,12.7z" />
        </g>
      </svg>

      <svg fxFlex="20px" style="height: 20px; margin-left: 10px;" fxFlexAlign="end" x="0px" y="0px" viewBox="0 0 16 20"
        (click)="deleteleAllDraw()" class="pointer"
        matTooltip="{{ 'right_menu.tools.draw.toolpit_delete' | translate }}">
        <path class="primaryColorFill" d="M12.6,20H3.4c-1.2,0-2.3-1-2.3-2.2V4.4h13.7v13.3C14.8,19,13.8,20,12.6,20z M16,3.3H0V1.1h4L5.1,0
h5.7L12,1.1h4V3.3L16,3.3z" />
      </svg>
    </div>
  </mat-expansion-panel>
</mat-accordion>
<!------------------------
  Overlay to edit/add comment in features
 ----------------------->
<div id="overlay-draw-text" class="whiteBG">

  <button mat-mini-fab color="primary" class="overlay-draw-text-closebtn" (click)="hideOverlay()">
    <i class="fa fa-times"></i>
  </button>

  <form *ngIf="formulaireText" [formGroup]="formulaireText">
    <mat-form-field appearance="outline">
      <mat-label>
        {{ "draw_in_map.your_comment_placeholder" | translate }}
      </mat-label>
      <textarea formControlName="comment" name="comment" class="primaryColorBorder overlay-draw-text-textarea" rows="6"
        matInput>
    </textarea>
    </mat-form-field>
  </form>

  <button mat-raised-button color="primary" class="overlay-draw-text-save" (click)="saveFormToFeaturePte()">
    {{ "draw_in_map.save" | translate }}
  </button>

</div>
<!------------------------
  Overlay to edit color of features
 ----------------------->
<div id="overlay-draw-color" class="whiteBG">
  <button mat-mini-fab color="primary" class="overlay-draw-color-closebtn" (click)="hideOverlayColor()">
    <i class="fa fa-times"></i>
  </button>

  <div *ngIf="formulaireText" style="text-align: center;margin-top: 20px;margin-bottom: 10px;">
    <div class="overlay-draw-color-picker" [style.backgroundColor]="formulaireText.controls['color'].value"
      [cpPosition]="'bottom'" [cpPositionOffset]="'10%'" [cpPositionRelativeToArrow]="true" [cpOKButton]="true"
      [colorPicker]="formulaireText.controls['color'].value" (colorPickerChange)="colorChanged($event)">
    </div>
    <span> {{formulaireText.controls['color'].value}} </span>
  </div>
  <button mat-raised-button color="primary" class="overlay-draw-color-save" (click)="saveFormToFeaturePte()">
    {{ "draw_in_map.apply_draw" | translate }}
  </button>

</div>
