<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>geosm-frontend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">geosm-frontend documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../">geosm-frontend documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./modules.html" >
                            <span class="fa fa-archive"></span>
                            <span>Modules</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            ></span>
                        </a>
                        <ul class="links collapse in"
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/AppModule.html" >AppModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/ComponentMaterialModule.html" >ComponentMaterialModule</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-cogs"></span>
                            <span>Components</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-components-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-components-links"
                            >
                                <li class="link">
                                    <a href="../components/AddGeosignetComponent.html" >AddGeosignetComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/AltimetryComponent.html" >AltimetryComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/AppComponent.html" >AppComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/CarteThematiqueComponent.html" >CarteThematiqueComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ChartOverlayComponent.html" >ChartOverlayComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/CommentComponent.html" >CommentComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ContextMenuComponent.html" >ContextMenuComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/CoucheThematiqueComponent.html" >CoucheThematiqueComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DescriptiveSheetComponent.html" >DescriptiveSheetComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DownloadComponent.html"  class="active" >DownloadComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DrawComponent.html" >DrawComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/GroupCarteComponent.html" >GroupCarteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/GroupThematiqueComponent.html" >GroupThematiqueComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/HeaderComponent.html" >HeaderComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/InfoComponent.html" >InfoComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LegendComponent.html" >LegendComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ListDownloadLayersComponent.html" >ListDownloadLayersComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ListGeosignetComponent.html" >ListGeosignetComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ListGroupCarteComponent.html" >ListGroupCarteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ListGroupThematiqueComponent.html" >ListGroupThematiqueComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MapComponent.html" >MapComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MapToolsComponent.html" >MapToolsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MeasureComponent.html" >MeasureComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MetadataComponent.html" >MetadataComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OsmSheetComponent.html" >OsmSheetComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PrintComponent.html" >PrintComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/RoutingComponent.html" >RoutingComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SearchComponent.html" >SearchComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SelectRoiComponent.html" >SelectRoiComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SidenaveLeftPrincipalComponent.html" >SidenaveLeftPrincipalComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SidenaveLeftSecondaireComponent.html" >SidenaveLeftSecondaireComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SocialShareComponent.html" >SocialShareComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/TableOfContentsComponent.html" >TableOfContentsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/VerticalToolbarComponent.html" >VerticalToolbarComponent</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-classes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/geosignets.html" >geosignets</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/handleAdresseFrSearch.html" >handleAdresseFrSearch</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/handleEmpriseSearch.html" >handleEmpriseSearch</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/handleLayerSearch.html" >handleLayerSearch</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/handlePhotonSearch.html" >handlePhotonSearch</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/manageDataHelper.html" >manageDataHelper</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/measureUtil.html" >measureUtil</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/selectLayersForDownload.html" >selectLayersForDownload</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-injectables-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/BackendApiService.html" >BackendApiService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/GeosmLayersServiceService.html" >GeosmLayersServiceService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ShareServiceService.html" >ShareServiceService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/StorageServiceService.html" >StorageServiceService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/cartoHelper.html" >cartoHelper</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/manageCompHelper.html" >manageCompHelper</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-interfaces-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/MetaDataInterface.html" >MetaDataInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/attributeInterface.html" >attributeInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/carteInterface.html" >carteInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/categorieInterface.html" >categorieInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/clesValOsmInterface.html" >clesValOsmInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/configProjetInterface.html" >configProjetInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/coucheInterface.html" >coucheInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/dataFromClickOnMapInterface.html" >dataFromClickOnMapInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/downloadDataModelInterface.html" >downloadDataModelInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/downloadModelInterface.html" >downloadModelInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/drawToolInterace.html" >drawToolInterace</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/filterOptionInterface.html" >filterOptionInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/geosignetInterface.html" >geosignetInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/geosignetsProjectInterface.html" >geosignetsProjectInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/geosmLayer.html" >geosmLayer</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/groupCarteInterface.html" >groupCarteInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/groupInterface.html" >groupInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/groupThematiqueInterface.html" >groupThematiqueInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/layersInMap.html" >layersInMap</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/legendCapabilitiesInterface.html" >legendCapabilitiesInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/limitesAdminstratives.html" >limitesAdminstratives</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/modelDescriptiveSheet.html" >modelDescriptiveSheet</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/modelOfDrawDataInDBInterface.html" >modelOfDrawDataInDBInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/modifyToolInterface.html" >modifyToolInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/modifyToolTypeInterface.html" >modifyToolTypeInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/propertiesFeatureInterface.html" >propertiesFeatureInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/responseOfSearchPhotonInterface.html" >responseOfSearchPhotonInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/responseOfSerachLimitInterface.html" >responseOfSerachLimitInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/responseOfSerachLimitInterface.html" >responseOfSerachLimitInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/rightMenuInterface.html" >rightMenuInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/searchLayerToDownlodModelInterface.html" >searchLayerToDownlodModelInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/sousCarteIntgerface.html" >sousCarteIntgerface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/sousThematiqueInterface.html" >sousThematiqueInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/tocCapabilitiesInterface.html" >tocCapabilitiesInterface</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../">geosm-frontend documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./modules.html" >
                                   <span class="fa fa-archive"></span>
                                   <span>Modules</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#modules-links"
                                   ></span>
                               </a>
                               <ul class="links collapse in"
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/AppModule.html" >AppModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/ComponentMaterialModule.html" >ComponentMaterialModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-cogs"></span>
                                   <span>Components</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#components-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="components-links"
                   >
                                       <li class="link">
                                           <a href="../components/AddGeosignetComponent.html" >AddGeosignetComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/AltimetryComponent.html" >AltimetryComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/AppComponent.html" >AppComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/CarteThematiqueComponent.html" >CarteThematiqueComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ChartOverlayComponent.html" >ChartOverlayComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/CommentComponent.html" >CommentComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ContextMenuComponent.html" >ContextMenuComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/CoucheThematiqueComponent.html" >CoucheThematiqueComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DescriptiveSheetComponent.html" >DescriptiveSheetComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DownloadComponent.html"  class="active" >DownloadComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DrawComponent.html" >DrawComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/GroupCarteComponent.html" >GroupCarteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/GroupThematiqueComponent.html" >GroupThematiqueComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/HeaderComponent.html" >HeaderComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/InfoComponent.html" >InfoComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LegendComponent.html" >LegendComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ListDownloadLayersComponent.html" >ListDownloadLayersComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ListGeosignetComponent.html" >ListGeosignetComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ListGroupCarteComponent.html" >ListGroupCarteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ListGroupThematiqueComponent.html" >ListGroupThematiqueComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MapComponent.html" >MapComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MapToolsComponent.html" >MapToolsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MeasureComponent.html" >MeasureComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MetadataComponent.html" >MetadataComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OsmSheetComponent.html" >OsmSheetComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PrintComponent.html" >PrintComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/RoutingComponent.html" >RoutingComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SearchComponent.html" >SearchComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SelectRoiComponent.html" >SelectRoiComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SidenaveLeftPrincipalComponent.html" >SidenaveLeftPrincipalComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SidenaveLeftSecondaireComponent.html" >SidenaveLeftSecondaireComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SocialShareComponent.html" >SocialShareComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/TableOfContentsComponent.html" >TableOfContentsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/VerticalToolbarComponent.html" >VerticalToolbarComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#classes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/geosignets.html" >geosignets</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/handleAdresseFrSearch.html" >handleAdresseFrSearch</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/handleEmpriseSearch.html" >handleEmpriseSearch</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/handleLayerSearch.html" >handleLayerSearch</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/handlePhotonSearch.html" >handlePhotonSearch</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/manageDataHelper.html" >manageDataHelper</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/measureUtil.html" >measureUtil</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/selectLayersForDownload.html" >selectLayersForDownload</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#injectables-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/BackendApiService.html" >BackendApiService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/GeosmLayersServiceService.html" >GeosmLayersServiceService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ShareServiceService.html" >ShareServiceService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/StorageServiceService.html" >StorageServiceService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/cartoHelper.html" >cartoHelper</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/manageCompHelper.html" >manageCompHelper</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#interfaces-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/MetaDataInterface.html" >MetaDataInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/attributeInterface.html" >attributeInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/carteInterface.html" >carteInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/categorieInterface.html" >categorieInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/clesValOsmInterface.html" >clesValOsmInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/configProjetInterface.html" >configProjetInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/coucheInterface.html" >coucheInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/dataFromClickOnMapInterface.html" >dataFromClickOnMapInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/downloadDataModelInterface.html" >downloadDataModelInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/downloadModelInterface.html" >downloadModelInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/drawToolInterace.html" >drawToolInterace</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/filterOptionInterface.html" >filterOptionInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/geosignetInterface.html" >geosignetInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/geosignetsProjectInterface.html" >geosignetsProjectInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/geosmLayer.html" >geosmLayer</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/groupCarteInterface.html" >groupCarteInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/groupInterface.html" >groupInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/groupThematiqueInterface.html" >groupThematiqueInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/layersInMap.html" >layersInMap</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/legendCapabilitiesInterface.html" >legendCapabilitiesInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/limitesAdminstratives.html" >limitesAdminstratives</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/modelDescriptiveSheet.html" >modelDescriptiveSheet</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/modelOfDrawDataInDBInterface.html" >modelOfDrawDataInDBInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/modifyToolInterface.html" >modifyToolInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/modifyToolTypeInterface.html" >modifyToolTypeInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/propertiesFeatureInterface.html" >propertiesFeatureInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/responseOfSearchPhotonInterface.html" >responseOfSearchPhotonInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/responseOfSerachLimitInterface.html" >responseOfSerachLimitInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/responseOfSerachLimitInterface.html" >responseOfSerachLimitInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/rightMenuInterface.html" >rightMenuInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/searchLayerToDownlodModelInterface.html" >searchLayerToDownlodModelInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/sousCarteIntgerface.html" >sousCarteIntgerface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/sousThematiqueInterface.html" >sousThematiqueInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/tocCapabilitiesInterface.html" >tocCapabilitiesInterface</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content component">
                   <div class="content-data">


<ol class="breadcrumb">
  <li>Components</li>
  <li>DownloadComponent</li>
</ol>


    <ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#infos" id="infos-tab" role="tab" data-toggle="tab">Infos</a>
        </li>
        <li>
            <a href="#source" role="tab" id="source-tab" data-toggle="tab">Source</a>
        </li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane fade active in" id="infos"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/map/sidenav-right/download/download.component.ts</code>
</p>



<section>
    <h3>Metadata</h3>
    <table class="table table-sm table-hover">
        <tbody>












            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>app-download</code></td>
            </tr>

            <tr>
                <td class="col-md-3">styleUrls</td>
                <td class="col-md-9"><code>download.component.scss</code></td>
            </tr>



            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>download.component.html</code></td>
            </tr>


        </tbody>
    </table>
</section>



    <section>
        <h3 id="constructor">Constructor</h3>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <code>constructor(renderer: Renderer2, BackendApiService: any, StorageServiceService: any, fb: <a href="https://angular.io/docs/ts/latest/api/forms/index/FormBuilder-class.html" target="_blank" >FormBuilder</a>, manageCompHelper: any)</code>
                        </td>
                    </tr>
    
                </tbody>
            </table>
    </section>

    <section>
        <h3 id="methods">Methods</h3>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> constructLayerToDisplayResult</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>constructLayerToDisplayResult()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>construct layer that will help to display result from export</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> initialiseFormsEmprise</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>initialiseFormsEmprise()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>initialise forms use to select emprise to perform download</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> displayAutocompleEmpriseFn</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>displayAutocompleEmpriseFn(emprise: responseOfSerachLimitInterface)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Use to format text that will appear after an option is choose in the autocomplete use to select layers in the UI</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>emprise</b>
                                                    </div>
                                                    <div>
                                                        <p>searchLayerToDownlodModelInterface</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>string</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> empriseSelected</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>empriseSelected(option: MatAutocompleteSelectedEvent)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>execute when user select an emprise from autopcomplete</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>option</b>
                                                    </div>
                                                    <div>
                                                        <p>MatAutocompleteSelectedEvent</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getGeometryOfEmprise</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getGeometryOfEmprise(params: { table: string; id: number; })</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>get ol geometry of an emprise</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>params</b>
                                                            :     <code>table</code>
    
                                                    </div>
                                                    <div>
                                                        <p>:string,id:number}</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> setRoiTypeToAll</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>setRoiTypeToAll()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Set type of ROI to &#39;all&#39;</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> toogleRoiType</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>toogleRoiType(value: MatSlideToggleChange)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> enableDownloadBtn</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>enableDownloadBtn()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Should the btn to dowload enable ?<br>if at least a layer to download is set and aa geometry is set</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>boolean</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> getLimitName</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>getLimitName(tableName: string)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>get name of a limit by the name of it table</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>tableName</b>
                                                    </div>
                                                    <div>
                                                        <p>string name of the table</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>string</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> generateExport</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>generateExport()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Generate export : if type of ROI is:</p>
    <ul>
    <li>&#39;all&#39; , this will call the function displayResultExport()</li>
    <li>&#39;emprise&#39;, this will call the function calculateExportInDB()</li>
    </ul>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> calculateExportInDB</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>calculateExportInDB()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>calculate the export in the DB</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> displayResultExport</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>displayResultExport(listData: { index: number; id: number; nom: string; nom_file: string; number: number; }[], geometry: any, title: string)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>display result of export data</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>listData</b>
                                                    </div>
                                                    <div>
                                                        <p>Array&lt;&gt;</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> closeChart</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>closeChart(idOverlay: string)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Close a chart : remove layer and overlay to the map</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>idOverlay</b>
                                                    </div>
                                                    <div>
                                                        <p>string</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> openModalListDonwnloadLayers</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>openModalListDonwnloadLayers(idOverlay: string)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Open modal to list all files that can be download</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>idOverlay</b>
                                                    </div>
                                                    <div>
                                                        <p>string</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> closeAllChartsInMap</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>closeAllChartsInMap()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Close all charts in the map</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> removeLayerExportData</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>removeLayerExportData()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Remove layer exportData from map if exist</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
    </section>

    <section>
        <h3 id="inputs">Properties</h3>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> BackendApiService</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>BackendApiService:     <code>any</code>
    </bcode>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> configProejct</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>configProejct:     <code>any</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Configuration of the project</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> downlodListOverlays</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>downlodListOverlays:     <code>any</code>
    </bcode>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> fb</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>fb:     <code><a href="https://angular.io/docs/ts/latest/api/forms/index/FormBuilder-class.html" target="_blank" >FormBuilder</a></code>
    </bcode>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> filterEmpriseOptions</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>filterEmpriseOptions:     <code>responseOfSerachLimitInterface[]</code>
    </bcode>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> formsEmprise</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>formsEmprise:     <code><a href="https://angular.io/docs/ts/latest/api/forms/index/FormGroup-class.html" target="_blank" >FormGroup</a></code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>forms use to choose emprise to make the download</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> listOfChartsInMap</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>listOfChartsInMap:     <code>{ [key: string]: { index: number; nom: string; nom_file: string; number: number; id: number; }[]; }</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>List of charts in the map</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> manageCompHelper</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>manageCompHelper:     <code>any</code>
    </bcode>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> StorageServiceService</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>StorageServiceService:     <code>any</code>
    </bcode>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> userClosedOverlay</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>userClosedOverlay:     <code>EventEmitter&lt;any&gt;</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Event emitter listen when a overlay is closed</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> userListFilesToDownload</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>userListFilesToDownload:     <code>EventEmitter&lt;any&gt;</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Event emitter listen when a use want to list all files to download them</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
    </section>
</div>
        <div class="tab-pane fade tab-source-code" id="source">
            <pre><code class="hljs javascript">import { Component, OnInit, ViewChild, ElementRef, Renderer2, EventEmitter } from &#x27;@angular/core&#x27;;
import { coucheInterface, carteInterface, configProjetInterface } from &#x27;src/app/type/type&#x27;;
import { FormGroup, FormArray, FormBuilder, FormControl, AbstractControl, Validators } from &#x27;@angular/forms&#x27;;
import { StorageServiceService } from &#x27;src/app/services/storage-service/storage-service.service&#x27;
import { BackendApiService } from &#x27;src/app/services/backend-api/backend-api.service&#x27;
import { startWith, map, filter, debounceTime, tap } from &#x27;rxjs/operators&#x27;;
import { from, Observable } from &#x27;rxjs&#x27;;
import { MatAutocompleteSelectedEvent } from &#x27;@angular/material/autocomplete&#x27;;
import { selectLayersForDownload, downloadModelInterface } from &#x27;./download-select-layers&#x27;
import { GeoJSON, VectorLayer, VectorSource, Style, Stroke, Fill, Feature, Overlay, getCenter } from &#x27;src/app/ol-module&#x27;;
import { MatSlideToggleChange } from &#x27;@angular/material/slide-toggle&#x27;;
import { environment } from &#x27;src/environments/environment&#x27;;
import { cartoHelper } from &#x27;src/helper/carto.helper&#x27;
import { manageDataHelper } from &#x27;src/helper/manage-data.helper&#x27;
import { manageCompHelper } from &#x27;src/helper/manage-comp.helper&#x27;
import { ChartOverlayComponent } from &#x27;./chart-overlay/chart-overlay.component&#x27;
import * as $ from &#x27;jquery&#x27;
import {ListDownloadLayersComponent,downloadDataModelInterface} from &#x27;./list-download-layers/list-download-layers.component&#x27;

/**
 * Interface of the model return when user  search a emprise
 */
export interface responseOfSerachLimitInterface {
  /**
   * DB table corresponding
   */
  table: string
  /**
   * id DB of in the table
   */
  id: number
  /**
   * name of the limit
   */
  limitName: string
  /**
   * name
   */
  name: string
  ref: string
}

@Component({
  selector: &#x27;app-download&#x27;,
  templateUrl: &#x27;./download.component.html&#x27;,
  styleUrls: [&#x27;./download.component.scss&#x27;]
})
/**
 * Components for dowloads data purposes
 */
export class DownloadComponent extends selectLayersForDownload implements OnInit {

  @ViewChild(&#x27;downlod_list_overlays&#x27;) downlodListOverlays: ElementRef;

  /**
   * Event emitter listen when a overlay is closed
   */
  userClosedOverlay: EventEmitter&lt;any&gt; &#x3D; new EventEmitter&lt;any&gt;()

  /**
   * Event emitter listen when a use want to list all files to download them
   */
  userListFilesToDownload: EventEmitter&lt;any&gt; &#x3D; new EventEmitter&lt;any&gt;()

  /**
   * Configuration of the project
   */
  configProejct: configProjetInterface

  /**
   * List of charts in the map
   */
  listOfChartsInMap: {
    [key: string]: {
      index: number
      nom: string
      nom_file: string
      number: number,
      id:number
    }[]
  } &#x3D; {}

  /**
   * forms use to choose emprise to make the download
   */
  formsEmprise: FormGroup;

  filterEmpriseOptions: responseOfSerachLimitInterface[] &#x3D; []

  constructor(
    private renderer: Renderer2,
    public BackendApiService: BackendApiService,
    public StorageServiceService: StorageServiceService,
    public fb: FormBuilder,
    public manageCompHelper: manageCompHelper
  ) {
    super(StorageServiceService, fb)
  }

  ngOnInit(): void {
    this.StorageServiceService.states.subscribe((value) &#x3D;&gt; {
      if (value.loadProjectData) {
        this.configProejct &#x3D; this.StorageServiceService.getConfigProjet()
        this.layersDownlodable &#x3D; this.getAllLayersDownlodable()
        this.initialiseFormsLayers()

        if (this.configProejct.limites.length &gt; 0) {
          this.downloadModel.roiType &#x3D; &#x27;emprise&#x27;
          this.initialiseFormsEmprise()
        } else {
          this.setRoiTypeToAll()
        }

        this.userClosedOverlay.subscribe((idOverlay) &#x3D;&gt; {
          this.closeChart(idOverlay)
        })

        this.userListFilesToDownload.subscribe((idOverlay) &#x3D;&gt; {
          this.openModalListDonwnloadLayers(idOverlay)
        })
      }
    })
  }

  /**
   * construct layer that will help to display result from export
   */
  constructLayerToDisplayResult() {
    this.removeLayerExportData()

    var layerExport &#x3D; new VectorLayer({
      source: new VectorSource(),
      style: new Style({
        stroke: new Stroke({
          color: &quot;#000&quot;,
          width: 2,
        }),
        fill: new Fill({
          color: environment.primaryColor,
        }),
      }),
      updateWhileAnimating: true,
      tocCapabilities: {
        opacity: false,
        metadata: false,
        share: false
      },
      type_layer: &#x27;exportData&#x27;,
      nom: &#x27;exportData&#x27;
    })

    layerExport.set(&#x27;iconImagette&#x27;, environment.url_frontend + &#x27;/assets/icones/draw.svg&#x27;)
    layerExport.set(&#x27;inToc&#x27;, false)
    layerExport.setZIndex(1000)

    return layerExport

  }
  /**
   * initialise forms use to select emprise to perform download
   */
  initialiseFormsEmprise() {
    var empriseControl &#x3D; new FormControl(&#x27;&#x27;, [Validators.minLength(2)])

    empriseControl.valueChanges.pipe(
      debounceTime(300),
      filter(value &#x3D;&gt; typeof value &#x3D;&#x3D; &#x27;string&#x27; &amp;&amp; value.length &gt; 1),
      startWith(&#x27;&#x27;),
      tap(() &#x3D;&gt; { console.log(&#x27;loading&#x27;) }),
      map((value) &#x3D;&gt; {
        return from(this.BackendApiService.post_requete(&#x27;/searchLimite&#x27;, { &#x27;word&#x27;: value.toString() }))
      })
    ).subscribe((value: Observable&lt;any&gt;) &#x3D;&gt; {

      value.subscribe((data) &#x3D;&gt; {
        var response: Array&lt;responseOfSerachLimitInterface&gt; &#x3D; []
        for (const key in data) {
          if (data.hasOwnProperty(key) &amp;&amp; key !&#x3D; &#x27;status&#x27;) {
            const element &#x3D; data[key];
            for (let index &#x3D; 0; index &lt; element.length; index++) {
              const responseI &#x3D; element[index];
              if (this.getLimitName(key)) {
                response.push({
                  ref: responseI[&#x27;ref&#x27;],
                  name: responseI[&#x27;name&#x27;],
                  id: responseI[&#x27;id&#x27;],
                  table: key,
                  limitName: this.getLimitName(key)
                })
              }
            }
          }
        }

        this.filterEmpriseOptions &#x3D; response

      })
    })

    this.formsEmprise &#x3D; this.fb.group({
      emprise: empriseControl
    })
  }

  /**
   * Use to format text that will appear after an option is choose in the autocomplete use to select layers in the UI
   * @param emprise searchLayerToDownlodModelInterface
   * @return string
   */
  displayAutocompleEmpriseFn(emprise: responseOfSerachLimitInterface): string {
    if (emprise) {
      if (emprise.ref) {
        return emprise.name + &#x27;(&#x27; + emprise.ref + &#x27;)&#x27;
      } else {
        return emprise.name
      }
    } else {
      return &#x27;&#x27;
    }
  }

  /**
   * execute when user select an emprise from autopcomplete
   * @param option MatAutocompleteSelectedEvent
   */
  empriseSelected(option: MatAutocompleteSelectedEvent) {
    var empriseInForm: responseOfSerachLimitInterface &#x3D; option.option.value
    if (empriseInForm.table &amp;&amp; empriseInForm.id) {
      this.downloadModel.parametersGeometryDB &#x3D; {
        table: empriseInForm.table,
        id: empriseInForm.id,
        name: empriseInForm.name
      }
      this.getGeometryOfEmprise({ table: empriseInForm.table, id: empriseInForm.id })
    }
  }

  /**
   * get ol geometry of an emprise
   * @param params {table:string,id:number}
   */
  getGeometryOfEmprise(params: { table: string, id: number }) {
    this.BackendApiService.post_requete(&#x27;/getLimitById&#x27;, params).then(
      (response) &#x3D;&gt; {
        var geojson &#x3D; JSON.parse(response[&quot;geometry&quot;])
        var feature &#x3D; new GeoJSON().readFeature(
          geojson,
          {
            dataProjection: &quot;EPSG:4326&quot;,
            featureProjection: &quot;EPSG:3857&quot;,
          }
        );
        this.downloadModel.roiGeometry &#x3D; feature.getGeometry()
      },
      (err) &#x3D;&gt; {

      }
    )
  }

  /**
   * Set type of ROI to &#x27;all&#x27;
   */
  setRoiTypeToAll() {
    this.downloadModel.roiType &#x3D; &#x27;all&#x27;
    var feature &#x3D; new GeoJSON().readFeature(
      this.configProejct.roiGeojson,
      {
        dataProjection: &quot;EPSG:4326&quot;,
        featureProjection: &quot;EPSG:3857&quot;,
      }
    );
    this.downloadModel.roiGeometry &#x3D; feature.getGeometry()
    this.downloadModel.parametersGeometryDB &#x3D; undefined
    if (this.formsEmprise) {
      this.formsEmprise.reset(&#x27;&#x27;)
    }

  }

  toogleRoiType(value: MatSlideToggleChange) {
    if (value.checked) {
      this.setRoiTypeToAll()
    } else {
      this.downloadModel.roiType &#x3D; &#x27;emprise&#x27;
      this.downloadModel.roiGeometry &#x3D; undefined
    }
  }

  /**
   * Should the btn to dowload enable ?
   * if at least a layer to download is set and aa geometry is set
   */
  enableDownloadBtn(): boolean {
    if (this.downloadModel.layers.length &gt; 0 &amp;&amp; this.downloadModel.roiGeometry) {
      return true
    } else {
      return false
    }
  }

  /**
   * get name of a limit by the name of it table
   * @param tableName string name of the table
   * @retun string
   */
  getLimitName(tableName: string): string {
    var response;
    for (let index &#x3D; 0; index &lt; this.configProejct.limites.length; index++) {
      const element &#x3D; this.configProejct.limites[index];
      if (element.nom_table &#x3D;&#x3D; tableName) {
        response &#x3D; element.nom
      }
    }
    return response
  }

  /**
   * Generate export : if type of ROI is:
   * - &#x27;all&#x27; , this will call the function displayResultExport()
   * - &#x27;emprise&#x27;, this will call the function calculateExportInDB()
   */
  generateExport(){
    if (this.downloadModel.roiType &#x3D;&#x3D; &#x27;emprise&#x27;) {
      this.calculateExportInDB()
    }else{
      var layers:Array&lt;{
        index: number
        nom: string
        nom_file: string
        number: number
        id: number
      }&gt;&#x3D;[]

      for (let index &#x3D; 0; index &lt; this.downloadModel.layers.length; index++) {
        const layer &#x3D; this.downloadModel.layers[index];
        var nom_shp &#x3D; environment.url_service + &#x27;/&#x27; + environment.path_qgis + &#x27;/&#x27; + environment.pojet_nodejs + &#x27;/gpkg/&#x27; + layer.params_files.nom_cat.replace(/[^a-zA-Z0-9]/g, &#x27;_&#x27;) + &#x27;_&#x27; + layer.params_files.sous_thematiques + &#x27;_&#x27; + layer.params_files.key_couche + &#x27;_&#x27; + layer.params_files.id_cat + &#x27;.gpkg&#x27;
        layers.push({
          &#x27;index&#x27;: index,
          &#x27;nom&#x27;: layer.nom,
          &#x27;number&#x27;: layer.number,
          &#x27;nom_file&#x27;: nom_shp,
          &#x27;id&#x27;: layer.key_couche,
        })
      }

      this.displayResultExport(layers,this.downloadModel.roiGeometry,&#x27;Export total&#x27;)
    }
  }
  /**
   * calculate the export in the DB
   */
  calculateExportInDB() {
    var listLayer &#x3D; []
    for (let index &#x3D; 0; index &lt; this.downloadModel.layers.length; index++) {
      const layer &#x3D; this.downloadModel.layers[index];
      listLayer.push({
        &#x27;url&#x27;: layer.url,
        &#x27;methode&#x27;: &#x27;qgis&#x27;,
        &#x27;index&#x27;: index,
        &#x27;nom&#x27;: layer.nom,
        &#x27;id_cat&#x27;: layer.params_files.id_cat,
        &#x27;type&#x27;: layer.type_couche,
        &#x27;identifiant&#x27;: layer.identifiant,
        &#x27;id_them&#x27;: this.StorageServiceService.getGroupThematiqueFromIdCouche(layer.key_couche).id_thematique,
        &#x27;key_couche&#x27;: layer.key_couche,
      })
    }
    var parameters &#x3D; {
      &#x27;querry&#x27;: listLayer,
      &#x27;lim_adm&#x27;: this.downloadModel.parametersGeometryDB.table,
      &#x27;id_lim&#x27;: this.downloadModel.parametersGeometryDB.id,
    }
    $(&#x27;.export-data-loading&#x27;).show()
    this.BackendApiService.post_requete(&#x27;/thematique/donwload&#x27;, parameters).then(
      (response: Array&lt;{
        index: number
        nom: string
        nom_file: string
        number: number,
        id:number
      }&gt;) &#x3D;&gt; {
        $(&#x27;.export-data-loading&#x27;).hide()
        for (let i &#x3D; 0; i &lt; response.length; i++) {
          response[i].id &#x3D; listLayer[response[i].index].key_couche
          response[i].nom_file &#x3D; environment.url_prefix+response[i].nom_file
        }

        this.displayResultExport(response, this.downloadModel.roiGeometry, this.downloadModel.parametersGeometryDB.name)
      },
      (error) &#x3D;&gt; {
        $(&#x27;.export-data-loading&#x27;).hide()
      }
    )
  }

  /**
   * display result of export data
   * @param listData Array&lt;&gt;
   */
  displayResultExport(listData: Array&lt;
    {
      index: number
      id: number
      nom: string
      nom_file: string
      number: number
    }&gt;, geometry: any, title: string) {

    this.closeAllChartsInMap()

    var idOverlay &#x3D; manageDataHelper.makeid()

    /** construct add layer of ROI to the map */
    var layerExport &#x3D; this.constructLayerToDisplayResult()
    layerExport.set(&#x27;properties&#x27;, { &#x27;idOverlay&#x27;: idOverlay })
    var featureRoi &#x3D; new Feature()
    featureRoi.setGeometry(geometry)
    layerExport.getSource().addFeature(featureRoi)

    var cartoClass &#x3D; new cartoHelper()
    cartoClass.addLayerToMap(layerExport)


    cartoClass.map.getView().fit(layerExport.getSource().getExtent(), { size: cartoClass.map.getSize(), duration: 1000 })

    /** construct and add overlay with the diagram on the map */
    var centerOfRoi &#x3D; getCenter(layerExport.getSource().getExtent());



    /** Construct the chart configuration */
    var numbers &#x3D; [];
    var labels &#x3D; [];
    for (var index &#x3D; 0; index &lt; listData.length; index++) {
      numbers.push(listData[index][&quot;number&quot;]);
      labels.push(listData[index][&quot;nom&quot;] + &quot; (&quot; + listData[index][&quot;number&quot;] + &quot;) &quot;);
    }
    var dynamicColors &#x3D; function () {
      var r &#x3D; Math.floor(Math.random() * 255);
      var g &#x3D; Math.floor(Math.random() * 255);
      var b &#x3D; Math.floor(Math.random() * 255);
      return &quot;rgb(&quot; + r + &quot;,&quot; + g + &quot;,&quot; + b + &quot;)&quot;;
    };
    var coloR &#x3D; [];
    for (var i in numbers) {
      coloR.push(dynamicColors());
    }

    let chartConfig &#x3D;
    {
      type: &quot;pie&quot;,
      scaleFontColor: &quot;red&quot;,
      data: {
        labels: labels,
        datasets: [
          {
            data: numbers,
            backgroundColor: coloR,
            borderColor: &quot;rgba(200, 200, 200, 0.75)&quot;,
            hoverBorderColor: &quot;rgba(200, 200, 200, 1)&quot;,
          },
        ],
      },
      options: {
        title: {
          display: true,
          text: title,
          fontColor: &quot;#fff&quot;,
          fontSize: 16,
          position: &quot;top&quot;,
        },
        legend: {
          display: true,
          labels: {
            fontColor: &quot;#fff&quot;,
            fontSize: 14,
          },
        },
        scales: {
          xAxes: [
            {
              display: false,
              ticks: {
                fontColor: &quot;Black&quot;,
              },
            },
          ],
          yAxes: [
            {
              display: false,
            },
          ],
        },

        onClick: (event) &#x3D;&gt; {
          console.log(event);
          var name_analyse &#x3D; event.target.id;
        }
      }

    }

    var elementChart &#x3D; this.manageCompHelper.createComponent(ChartOverlayComponent, { &#x27;chartConnfiguration&#x27;: chartConfig, &#x27;idChart&#x27;: idOverlay, &#x27;close&#x27;: this.userClosedOverlay,&#x27;listFiles&#x27;: this.userListFilesToDownload })

    this.manageCompHelper.appendComponent(elementChart, this.downlodListOverlays.nativeElement)

    var overlayExport &#x3D; new Overlay({
      position: centerOfRoi,
      positioning: &quot;center-center&quot;,
      element: elementChart.location.nativeElement,
      id: idOverlay
    });

    cartoClass.map.addOverlay(overlayExport);

    this.listOfChartsInMap[idOverlay] &#x3D; listData

  }

  /**
   * Close a chart : remove layer and overlay to the map
   * @param idOverlay string
   */
  closeChart(idOverlay:string) {
    var cartoClass &#x3D; new cartoHelper()

    this.removeLayerExportData()

    var overlay &#x3D; cartoClass.map.getOverlayById(idOverlay)
    cartoClass.map.removeOverlay(overlay)
  }

  /**
   * Open modal to list all files that can be download
   * @param idOverlay string
   */
  openModalListDonwnloadLayers(idOverlay:string){
    var modelDownload:downloadDataModelInterface[] &#x3D; []
    for (let index &#x3D; 0; index &lt; this.listOfChartsInMap[idOverlay].length; index++) {
      const element &#x3D; this.listOfChartsInMap[idOverlay][index];
      modelDownload.push({
        layer:undefined,
        groupThematique:undefined,
        empriseName:this.downloadModel.parametersGeometryDB?this.downloadModel.parametersGeometryDB.name:&#x27;Export total&#x27;,
        nom:element.nom,
        number:element.number,
        index:element.index,
        id:element.id,
        url:element.nom_file
      })
    }

    this.manageCompHelper.openModalDownloadData(modelDownload,[],()&#x3D;&gt;{

    })

  }

  /**
   * Close all charts in the map
   */
  closeAllChartsInMap(){
    for (const key in this.listOfChartsInMap) {
      if (this.listOfChartsInMap.hasOwnProperty(key)) {
        this.closeChart(key)
      }
    }
  }

  /**
   * Remove layer exportData from map if exist
   */
  removeLayerExportData() {
    var cartoClass &#x3D; new cartoHelper()
    var layer &#x3D; cartoClass.getLayerByName(&#x27;exportData&#x27;)
    for (let index &#x3D; 0; index &lt; layer.length; index++) {
      const element &#x3D; layer[index];
      cartoClass.map.removeLayer(element)
    }
  }

}
</code></pre>
        </div>
    </div>










                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/menu.js"></script>
       <script src="../js/libs/highlight.pack.js"></script>
       <script src="../js/libs/highlightjs-line-numbers.min.js"></script>
       <script src="../js/search/search_index.js"></script>
       <script>
            document.addEventListener('DOMContentLoaded', function() {
                hljs.initHighlightingOnLoad();
                hljs.initLineNumbersOnLoad();
            });
       </script>

    </body>
</html>
