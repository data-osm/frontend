<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>geosm-frontend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">geosm-frontend documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../">geosm-frontend documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./modules.html" >
                            <span class="fa fa-archive"></span>
                            <span>Modules</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            ></span>
                        </a>
                        <ul class="links collapse in"
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/AppModule.html" >AppModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/ComponentMaterialModule.html" >ComponentMaterialModule</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-cogs"></span>
                            <span>Components</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-components-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-components-links"
                            >
                                <li class="link">
                                    <a href="../components/AddGeosignetComponent.html" >AddGeosignetComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/AltimetryComponent.html" >AltimetryComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/AppComponent.html" >AppComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/CarteThematiqueComponent.html" >CarteThematiqueComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ChartOverlayComponent.html" >ChartOverlayComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/CommentComponent.html" >CommentComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ContextMenuComponent.html" >ContextMenuComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/CoucheThematiqueComponent.html" >CoucheThematiqueComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DescriptiveSheetComponent.html" >DescriptiveSheetComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DownloadComponent.html" >DownloadComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DrawComponent.html" >DrawComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/GroupCarteComponent.html" >GroupCarteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/GroupThematiqueComponent.html" >GroupThematiqueComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/HeaderComponent.html" >HeaderComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/InfoComponent.html" >InfoComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LegendComponent.html" >LegendComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ListDownloadLayersComponent.html" >ListDownloadLayersComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ListGeosignetComponent.html" >ListGeosignetComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ListGroupCarteComponent.html" >ListGroupCarteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ListGroupThematiqueComponent.html" >ListGroupThematiqueComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MapComponent.html" >MapComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MapToolsComponent.html" >MapToolsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MeasureComponent.html" >MeasureComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MetadataComponent.html" >MetadataComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OsmSheetComponent.html" >OsmSheetComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PrintComponent.html" >PrintComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/RoutingComponent.html" >RoutingComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SearchComponent.html" >SearchComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SelectRoiComponent.html" >SelectRoiComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SidenaveLeftPrincipalComponent.html" >SidenaveLeftPrincipalComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SidenaveLeftSecondaireComponent.html" >SidenaveLeftSecondaireComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SocialShareComponent.html" >SocialShareComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/TableOfContentsComponent.html" >TableOfContentsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/VerticalToolbarComponent.html" >VerticalToolbarComponent</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-classes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/geosignets.html" >geosignets</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/handleAdresseFrSearch.html" >handleAdresseFrSearch</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/handleEmpriseSearch.html" >handleEmpriseSearch</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/handleLayerSearch.html" >handleLayerSearch</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/handlePhotonSearch.html" >handlePhotonSearch</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/manageDataHelper.html" >manageDataHelper</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/measureUtil.html" >measureUtil</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/selectLayersForDownload.html" >selectLayersForDownload</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-injectables-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/BackendApiService.html" >BackendApiService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/GeosmLayersServiceService.html" >GeosmLayersServiceService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ShareServiceService.html" >ShareServiceService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/StorageServiceService.html" >StorageServiceService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/cartoHelper.html" >cartoHelper</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/manageCompHelper.html" >manageCompHelper</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-interfaces-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/MetaDataInterface.html" >MetaDataInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/attributeInterface.html" >attributeInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/carteInterface.html" >carteInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/categorieInterface.html" >categorieInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/clesValOsmInterface.html" >clesValOsmInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/configProjetInterface.html" >configProjetInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/coucheInterface.html" >coucheInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/dataFromClickOnMapInterface.html" >dataFromClickOnMapInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/downloadDataModelInterface.html" >downloadDataModelInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/downloadModelInterface.html" >downloadModelInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/drawToolInterace.html" >drawToolInterace</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/filterOptionInterface.html" >filterOptionInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/geosignetInterface.html" >geosignetInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/geosignetsProjectInterface.html" >geosignetsProjectInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/geosmLayer.html" >geosmLayer</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/groupCarteInterface.html" >groupCarteInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/groupInterface.html" >groupInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/groupThematiqueInterface.html" >groupThematiqueInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/layersInMap.html" >layersInMap</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/legendCapabilitiesInterface.html" >legendCapabilitiesInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/limitesAdminstratives.html" >limitesAdminstratives</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/modelDescriptiveSheet.html" >modelDescriptiveSheet</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/modelOfDrawDataInDBInterface.html" >modelOfDrawDataInDBInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/modifyToolInterface.html" >modifyToolInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/modifyToolTypeInterface.html" >modifyToolTypeInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/propertiesFeatureInterface.html" >propertiesFeatureInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/responseOfSearchPhotonInterface.html" >responseOfSearchPhotonInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/responseOfSerachLimitInterface.html" >responseOfSerachLimitInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/responseOfSerachLimitInterface.html" >responseOfSerachLimitInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/rightMenuInterface.html" >rightMenuInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/searchLayerToDownlodModelInterface.html" >searchLayerToDownlodModelInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/sousCarteIntgerface.html" >sousCarteIntgerface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/sousThematiqueInterface.html" >sousThematiqueInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/tocCapabilitiesInterface.html"  class="active" >tocCapabilitiesInterface</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../">geosm-frontend documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./modules.html" >
                                   <span class="fa fa-archive"></span>
                                   <span>Modules</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#modules-links"
                                   ></span>
                               </a>
                               <ul class="links collapse in"
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/AppModule.html" >AppModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/ComponentMaterialModule.html" >ComponentMaterialModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-cogs"></span>
                                   <span>Components</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#components-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="components-links"
                   >
                                       <li class="link">
                                           <a href="../components/AddGeosignetComponent.html" >AddGeosignetComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/AltimetryComponent.html" >AltimetryComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/AppComponent.html" >AppComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/CarteThematiqueComponent.html" >CarteThematiqueComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ChartOverlayComponent.html" >ChartOverlayComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/CommentComponent.html" >CommentComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ContextMenuComponent.html" >ContextMenuComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/CoucheThematiqueComponent.html" >CoucheThematiqueComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DescriptiveSheetComponent.html" >DescriptiveSheetComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DownloadComponent.html" >DownloadComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DrawComponent.html" >DrawComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/GroupCarteComponent.html" >GroupCarteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/GroupThematiqueComponent.html" >GroupThematiqueComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/HeaderComponent.html" >HeaderComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/InfoComponent.html" >InfoComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LegendComponent.html" >LegendComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ListDownloadLayersComponent.html" >ListDownloadLayersComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ListGeosignetComponent.html" >ListGeosignetComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ListGroupCarteComponent.html" >ListGroupCarteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ListGroupThematiqueComponent.html" >ListGroupThematiqueComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MapComponent.html" >MapComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MapToolsComponent.html" >MapToolsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MeasureComponent.html" >MeasureComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MetadataComponent.html" >MetadataComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OsmSheetComponent.html" >OsmSheetComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PrintComponent.html" >PrintComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/RoutingComponent.html" >RoutingComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SearchComponent.html" >SearchComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SelectRoiComponent.html" >SelectRoiComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SidenaveLeftPrincipalComponent.html" >SidenaveLeftPrincipalComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SidenaveLeftSecondaireComponent.html" >SidenaveLeftSecondaireComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SocialShareComponent.html" >SocialShareComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/TableOfContentsComponent.html" >TableOfContentsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/VerticalToolbarComponent.html" >VerticalToolbarComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#classes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/geosignets.html" >geosignets</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/handleAdresseFrSearch.html" >handleAdresseFrSearch</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/handleEmpriseSearch.html" >handleEmpriseSearch</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/handleLayerSearch.html" >handleLayerSearch</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/handlePhotonSearch.html" >handlePhotonSearch</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/manageDataHelper.html" >manageDataHelper</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/measureUtil.html" >measureUtil</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/selectLayersForDownload.html" >selectLayersForDownload</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#injectables-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/BackendApiService.html" >BackendApiService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/GeosmLayersServiceService.html" >GeosmLayersServiceService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ShareServiceService.html" >ShareServiceService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/StorageServiceService.html" >StorageServiceService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/cartoHelper.html" >cartoHelper</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/manageCompHelper.html" >manageCompHelper</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#interfaces-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/MetaDataInterface.html" >MetaDataInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/attributeInterface.html" >attributeInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/carteInterface.html" >carteInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/categorieInterface.html" >categorieInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/clesValOsmInterface.html" >clesValOsmInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/configProjetInterface.html" >configProjetInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/coucheInterface.html" >coucheInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/dataFromClickOnMapInterface.html" >dataFromClickOnMapInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/downloadDataModelInterface.html" >downloadDataModelInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/downloadModelInterface.html" >downloadModelInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/drawToolInterace.html" >drawToolInterace</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/filterOptionInterface.html" >filterOptionInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/geosignetInterface.html" >geosignetInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/geosignetsProjectInterface.html" >geosignetsProjectInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/geosmLayer.html" >geosmLayer</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/groupCarteInterface.html" >groupCarteInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/groupInterface.html" >groupInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/groupThematiqueInterface.html" >groupThematiqueInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/layersInMap.html" >layersInMap</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/legendCapabilitiesInterface.html" >legendCapabilitiesInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/limitesAdminstratives.html" >limitesAdminstratives</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/modelDescriptiveSheet.html" >modelDescriptiveSheet</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/modelOfDrawDataInDBInterface.html" >modelOfDrawDataInDBInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/modifyToolInterface.html" >modifyToolInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/modifyToolTypeInterface.html" >modifyToolTypeInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/propertiesFeatureInterface.html" >propertiesFeatureInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/responseOfSearchPhotonInterface.html" >responseOfSearchPhotonInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/responseOfSerachLimitInterface.html" >responseOfSerachLimitInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/responseOfSerachLimitInterface.html" >responseOfSerachLimitInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/rightMenuInterface.html" >rightMenuInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/searchLayerToDownlodModelInterface.html" >searchLayerToDownlodModelInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/sousCarteIntgerface.html" >sousCarteIntgerface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/sousThematiqueInterface.html" >sousThematiqueInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/tocCapabilitiesInterface.html"  class="active" >tocCapabilitiesInterface</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content interface">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>tocCapabilitiesInterface</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
    <li class="active">
        <a href="#infos" id="infos-tab" role="tab" data-toggle="tab">Infos</a>
    </li>
    <li>
        <a href="#source" role="tab" id="source-tab" data-toggle="tab">Source</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="infos">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/helper/carto.helper.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Interface of the table of contents capabilities</p>

            </p>




            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <b>metadata</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>metadata:     <code>boolean</code>
</bcode>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>boolean</code>

                                        </td>
                                    </tr>



                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <b>opacity</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>opacity:     <code>boolean</code>
</bcode>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>boolean</code>

                                        </td>
                                    </tr>



                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>change opactity</p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <b>share</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>share:     <code>boolean</code>
</bcode>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>boolean</code>

                                        </td>
                                    </tr>



                        </tbody>
                    </table>
            </section>
    </div>
    <div class="tab-pane fade tab-source-code" id="source">
        <pre><code class="hljs javascript">import {
  Map, GeoJSON, Style, Fill, VectorLayer, VectorImageLayer, VectorSource, RasterSource, ImageLayer, ImageWMS, boundingExtent, Extent, transformExtent, Cluster, CircleStyle, Stroke, Text, Icon, TileLayer, XYZ, LayerGroup, TileWMS, Point, Feature
} from &#x27;../app/ol-module&#x27;
import * as $ from &#x27;jquery&#x27;
import { BackendApiService } from &#x27;src/app/services/backend-api/backend-api.service&#x27;
import { environment } from &#x27;src/environments/environment&#x27;
import { map as portailMap } from &#x27;src/app/map/map.component&#x27;
import { Injectable, Injector } from &#x27;@angular/core&#x27;
import { AppInjector } from &#x27;src/helper/app-injector.helper&#x27;
import { manageDataHelper } from &#x27;./manage-data.helper&#x27;
import { HttpErrorResponse } from &#x27;@angular/common/http&#x27;
import { from, timer } from &#x27;rxjs&#x27;
import { retryWhen, tap, delay, take, delayWhen, retry, shareReplay } from &#x27;rxjs/operators&#x27;

/**
 * interface that describe data get by a click on the map
 */
export interface dataFromClickOnMapInterface {
  type: &#x27;vector&#x27; | &#x27;raster&#x27; | &#x27;clear&#x27;,
  data: {
    coord: [number,number],
    layers: Array&lt;any&gt;,
    feature?: Feature
    /** additional data */
    data?: {}
  }
}

/**
 * Interface of the table of contents capabilities
 */
export interface tocCapabilitiesInterface {
  /**
       * change opactity
       */
  opacity: boolean,
  metadata: boolean,
  share: boolean
}
/**
 * Interface of the legend capabilities
 */
export interface legendCapabilitiesInterface {
  /**
   * url of the img icon
   */
  urlImg?: string
  /**
   * use legend from the carto server
   */
  useCartoServer?: boolean
}

/**
 * Interface of all layers in the map
 */
export interface layersInMap {
  nom: string
  type_layer: &#x27;geosmCatalogue&#x27; | &#x27;draw&#x27; | &#x27;mesure&#x27; | &#x27;mappilary&#x27; | &#x27;exportData&#x27; | &#x27;other&#x27; | &#x27;routing&#x27;,
  image: string
  properties: Object | null
  zIndex: number
  visible: boolean
  data: any,
  /**
   * text and background color of the badje in the table of contents
   */
  badge?: {
    text: string,
    bgColor: string
  }
  /**
   * The layer type OL/layer in the map
   */
  layer: any
  /**
 * capabilities of the layer in toc. They user can set opactiy ? read metadata ?...
 * By default, all is set to true
 */
  tocCapabilities: tocCapabilitiesInterface
  /**
   * capabilities of the layer legend. how to display legend of the layer ? with the url of a image ? with the legend of the carto server ?
   * by default this is none &#x3D;&gt; no legend to display
   */
  legendCapabilities?: legendCapabilitiesInterface
  /**
   * description sheet capabilities
   */
  descriptionSheetCapabilities: &#x27;osm&#x27;
}

const typeLayer &#x3D; [&#x27;geosmCatalogue&#x27;, &#x27;draw&#x27;, &#x27;mesure&#x27;, &#x27;mappilary&#x27;, &#x27;exportData&#x27;, &#x27;other&#x27;, &#x27;routing&#x27;]
/**
 * interface to construct  a layer
 */
export interface geosmLayer {
  &#x27;nom&#x27;: string,
  /**
   * is the layer should appear in the toc ?
   */
  &#x27;inToc&#x27;: boolean
  &#x27;type_layer&#x27;: &#x27;geosmCatalogue&#x27; | &#x27;draw&#x27; | &#x27;mesure&#x27; | &#x27;mappilary&#x27; | &#x27;exportData&#x27; | &#x27;other&#x27; | &#x27;routing&#x27;,
  &#x27;type&#x27;: &#x27;geojson&#x27; | &#x27;wfs&#x27; | &#x27;wms&#x27; | &#x27;xyz&#x27;,
  &#x27;crs&#x27;?: string,
  &#x27;visible&#x27;: boolean,
  &#x27;strategy&#x27;?: &quot;bbox&quot; | &quot;all&quot;,
  &#x27;load&#x27;?: boolean,
  &#x27;style&#x27;?: any,
  &#x27;maxzoom&#x27;?: number,
  &#x27;minzoom&#x27;?: number,
  &quot;zindex&quot;?: number,
  &quot;size&quot;?: number,
  &quot;cluster&quot;?: boolean,
  &quot;icon&quot;?: string,
  &quot;iconImagette&quot;?: string,
  &quot;url&quot;?: string,
  &quot;identifiant&quot;?: string,
  /**
   * capabilities of the layer in toc. They user can set opactiy ? read metadata ?...
   * By default, all is set to true
   */
  tocCapabilities?: tocCapabilitiesInterface
  /**
   * capabilities of the layer legend. how to display legend of the layer ? with the url of a image ? with the legend of the carto server ?
   * by default this is none &#x3D;&gt; no legend to display
   */
  legendCapabilities?: legendCapabilitiesInterface
  &#x27;properties&#x27;: {
    group_id: number,
    couche_id: number,
    type: &#x27;couche&#x27; | &#x27;carte&#x27;
  } | null | Object
  descriptionSheetCapabilities: &#x27;osm&#x27;
}


/**
 * Handle diverse operation in link with the map
 */
@Injectable()
export class cartoHelper {


  map: Map
  environment &#x3D; environment
  BackendApiService: BackendApiService &#x3D; AppInjector.get(BackendApiService);

  constructor(
    map?: Map,
  ) {

    if (map) {
      this.map &#x3D; map
    } else {
      this.map &#x3D; portailMap
    }

  }


  /**
   * Construct a shadow layer
   * @returns ImageLayer
   */
  constructShadowLayer(geojsonLayer: Object): ImageLayer {
    var worldGeojson &#x3D; {
      &quot;type&quot;: &quot;FeatureCollection&quot;,
      &quot;name&quot;: &quot;world_shadow&quot;,
      &quot;crs&quot;: { &quot;type&quot;: &quot;name&quot;, &quot;properties&quot;: { &quot;name&quot;: &quot;urn:ogc:def:crs:EPSG::3857&quot; } },
      &quot;features&quot;: [
        { &quot;type&quot;: &quot;Feature&quot;, &quot;properties&quot;: { &quot;id&quot;: 0 }, &quot;geometry&quot;: { &quot;type&quot;: &quot;Polygon&quot;, &quot;coordinates&quot;: [[[-19824886.222640071064234, 19848653.805728208273649], [19467681.065475385636091, 19467681.065475385636091], [19753445.191207133233547, -15987945.626927629113197], [-19824886.222640071064234, -15967070.525261469185352], [-19824886.222640071064234, 19848653.805728208273649]]] } }
      ]
    }

    var featureToShadow &#x3D; new GeoJSON().readFeatures(geojsonLayer, {
      dataProjection: &#x27;EPSG:4326&#x27;,
      featureProjection: &#x27;EPSG:3857&#x27;
    });

    var featureWorld &#x3D; new GeoJSON().readFeatures(worldGeojson);

    var rasterSource_world &#x3D; new VectorImageLayer({
      source: new VectorSource(),
      projection: &#x27;EPSG:3857&#x27;,
      style: new Style({
        fill: new Fill({
          color: [0, 0, 0, 0.6]
        })
      })
    });

    var rasterSource_cmr &#x3D; new VectorImageLayer({
      source: new VectorSource(),
      projection: &#x27;EPSG:3857&#x27;,
      style: new Style({
        fill: new Fill({
          color: [0, 0, 0, 0.1]
        })
      })
    });

    rasterSource_world.getSource().addFeatures(featureWorld)
    rasterSource_cmr.getSource().addFeatures(featureToShadow);

    var raster &#x3D; new RasterSource({
      sources: [
        rasterSource_world,
        rasterSource_cmr
      ],
      operation: function (pixels, data) {
        if (pixels[1][3] &#x3D;&#x3D; 0) {
          return pixels[0];
        } else {
          return [0, 0, 0, 1]
        }
      }
    });

    var rasterLayer &#x3D; new ImageLayer({
      source: raster,
      nom: &#x27;map-shadow&#x27;,
      /**
       * so that map.forEachLayerAtPixel work as expected
       * @see https://openlayers.org/en/latest/apidoc/module-ol_PluggableMap-PluggableMap.html#forEachLayerAtPixel
       */
      className: &#x27;map-shadow&#x27;,

    });

    return rasterLayer

  }

  /**
     * Get all id from a layer source
     * @param source VectorSource
     * @return Array&lt;string&gt;
     */
  public static listIdFromSource(source: VectorSource): Array&lt;string&gt; {
    var response &#x3D; []
    for (let index &#x3D; 0; index &lt; source.getFeatures().length; index++) {
      const feat &#x3D; source.getFeatures()[index];
      response.push(feat.getId())
    }
    return response
  }

  /**
   * Get the current extent of the map
  */
  getCurrentMapExtent(): Extent {
    try {
      var coord_O_N &#x3D; this.map.getCoordinateFromPixel([$(&#x27;.mat-sidenav .sidenav-left&#x27;).width(), $(window).height()])
      var coord_E_S &#x3D; this.map.getCoordinateFromPixel([$(window).width(), 0])
      var extent_vieuw &#x3D; boundingExtent([coord_O_N, coord_E_S])
      return extent_vieuw
    } catch (error) {
      var extent_vieuw &#x3D; this.map.getView().calculateExtent()
      return extent_vieuw
    }
  }



  /**
   * Construct a layer with openlayers
   * @param couche geosmLayer the layer to construct
   * @return VectorLayer|ImageLayer the layer costructed
   */
  constructLayer(couche: geosmLayer) {
    if (couche.type &#x3D;&#x3D; &quot;xyz&quot;) {
      var layer &#x3D; new TileLayer({
        source: new XYZ({
          url: couche.url,
          attributions:&#x27;&lt;a target&#x3D;&quot;_blank&quot; href&#x3D;&quot;https://www.openstreetmap.org/copyright&quot;&gt; © OpenStreetMap &lt;/a&gt; contributors , develop by &lt;a target&#x3D;&quot;_blank&quot; href&#x3D;&quot;https://twitter.com/armeltayou&quot;&gt; @armeltayou &lt;/a&gt;&#x27;,
        }),
        /**
      * so that map.forEachLayerAtPixel work as expected
      * @see https://openlayers.org/en/latest/apidoc/module-ol_PluggableMap-PluggableMap.html#forEachLayerAtPixel
      */
        className: couche.nom + &#x27;___&#x27; + couche.type_layer
      })
    } else if (couche.type &#x3D;&#x3D; &quot;wms&quot;) {

      var wmsSourceTile &#x3D; new TileWMS({
        url: couche.url,
        params: { &#x27;LAYERS&#x27;: couche.identifiant, &#x27;TILED&#x27;: true },
        serverType: &#x27;qgis&#x27;,
        crossOrigin: &#x27;anonymous&#x27;,
      });

      var layerTile &#x3D; new TileLayer({
        source: wmsSourceTile,
        /**
       * so that map.forEachLayerAtPixel work as expected
       * @see https://openlayers.org/en/latest/apidoc/module-ol_PluggableMap-PluggableMap.html#forEachLayerAtPixel
       */
        className: couche.nom + &#x27;___&#x27; + couche.type_layer,
        minResolution: this.map.getView().getResolutionForZoom(9)
      });

      var wmsSourceImage &#x3D; new ImageWMS({
        url: couche.url,
        params: { &#x27;LAYERS&#x27;: couche.identifiant, &#x27;TILED&#x27;: true },
        serverType: &#x27;qgis&#x27;,
        crossOrigin: &#x27;anonymous&#x27;,
      });

      var layerImage &#x3D; new ImageLayer({
        source: wmsSourceImage,
        /**
       * so that map.forEachLayerAtPixel work as expected
       * @see https://openlayers.org/en/latest/apidoc/module-ol_PluggableMap-PluggableMap.html#forEachLayerAtPixel
       */
        className: couche.nom + &#x27;___&#x27; + couche.type_layer,
        maxResolution: this.map.getView().getResolutionForZoom(9),
      });

      var layer &#x3D; new LayerGroup({
        layers: [
          layerTile,
          layerImage
        ]
      })

    } else if (couche.type &#x3D;&#x3D; &quot;geojson&quot;) {
      var vectorSource &#x3D; new VectorSource({
        format: new GeoJSON(),
      })

      var layer &#x3D; new layer({
        source: vectorSource,
        style: couche.style,
        /**
      * so that map.forEachLayerAtPixel work as expected
      * @see https://openlayers.org/en/latest/apidoc/module-ol_PluggableMap-PluggableMap.html#forEachLayerAtPixel
      */
        className: couche.nom + &#x27;___&#x27; + couche.type_layer
      })

      if (couche.cluster) {
        var clusterSource &#x3D; new Cluster({
          distance: 80,
          source: vectorSource
        });
        var styleCache &#x3D; {};
        var styleCacheCopy &#x3D; {}
        var layer &#x3D; new VectorLayer({
          source: clusterSource,
          style: (feature) &#x3D;&gt; {
            var size &#x3D; feature.get(&#x27;features&#x27;).length;

            if (size &gt; 1) {

              var styleDefault &#x3D; styleCache[size];
              if (!styleDefault) {
                var radius &#x3D; 10
                if (size &gt; 99) {
                  radius &#x3D; 12, 5
                }
                styleDefault &#x3D; new Style({

                  image: new CircleStyle({
                    radius: radius,

                    stroke: new Stroke({
                      color: &#x27;#fff&#x27;,
                      width: 2
                    }),
                    fill: new Fill({
                      color: environment.primaryColor,
                    })
                  }),
                  text: new Text({
                    text: size.toString(),
                    fill: new Fill({
                      color: &#x27;#fff&#x27;
                    }),
                    font: &#x27;12px sans-serif&#x27;,
                    offsetY: 1,
                    offsetX: -0.5
                  })
                });
                styleCache[size] &#x3D; styleDefault;
              }

              return [couche.style, styleDefault];

            } else if (size &#x3D;&#x3D; 1) {
              return new Style({
                image: new Icon({
                  scale: couche.size,
                  src: couche.icon
                })
              })

            } else if (size &#x3D;&#x3D; 0) {
              return
            }

          },
          /**
          * so that map.forEachLayerAtPixel work as expected
          * @see https://openlayers.org/en/latest/apidoc/module-ol_PluggableMap-PluggableMap.html#forEachLayerAtPixel
          */
          className: couche.nom + &#x27;___&#x27; + couche.type_layer
        });

      }


    } else if (couche.type &#x3D;&#x3D; &#x27;wfs&#x27;) {
      var source &#x3D; new VectorSource({
        format: new GeoJSON({ dataProjection: &#x27;EPSG:4326&#x27;, featureProjection: &#x27;EPSG:3857&#x27; }),
        loader: (extent, resolution, projection) &#x3D;&gt; {
          var extent_vieuw &#x3D; this.getCurrentMapExtent()
          var url &#x3D; couche.url +
            &#x27;?bbox&#x3D;&#x27; + transformExtent(extent_vieuw, &#x27;EPSG:3857&#x27;, &#x27;EPSG:4326&#x27;).join(&#x27;,&#x27;) +
            &#x27;&amp;SERVICE&#x3D;WFS&amp;VERSION&#x3D;1.1.0&amp;REQUEST&#x3D;GETFEATURE&amp;outputFormat&#x3D;GeoJSON&amp;typeName&#x3D;&#x27; + couche.identifiant;
          this.BackendApiService.getRequestFromOtherHostObserver(url)
          .pipe(
            /** retry 3 times after 2s if querry failed  */
            retryWhen(errors&#x3D;&gt;
              errors.pipe(
                tap((val:HttpErrorResponse) &#x3D;&gt; {
                  // console.log(val)
                }),
                delayWhen((val:HttpErrorResponse) &#x3D;&gt; timer(2000)),
                // delay(2000),
                take(3)
              )
            )
          )
          .subscribe(
            (data)&#x3D;&gt;{
              source.addFeatures(source.getFormat().readFeatures(data));
              for (let index &#x3D; 0; index &lt; source.getFeatures().length; index++) {
                const feature &#x3D; source.getFeatures()[index];
                feature.set(&#x27;featureId&#x27;,feature.getId())
              }
            },
            (err:HttpErrorResponse) &#x3D;&gt; {
              source.removeLoadedExtent(extent_vieuw);
            }
          )

        }
      });

      var layer &#x3D; new VectorLayer({
        source: source,
        style: new Style({
          image: new Icon({
            scale: couche.size,
            src: couche.icon
          })
        }),
        /**
      * so that map.forEachLayerAtPixel work as expected
      * @see https://openlayers.org/en/latest/apidoc/module-ol_PluggableMap-PluggableMap.html#forEachLayerAtPixel
      */
        className: couche.nom + &#x27;___&#x27; + couche.type_layer
      });

      if (couche.cluster) {
        var clusterSource &#x3D; new Cluster({
          distance: 80,
          source: source
        });
        var styleCache &#x3D; {};
        var styleCacheCopy &#x3D; {}
        var layer &#x3D; new VectorLayer({
          source: clusterSource,
          style: (feature) &#x3D;&gt; {
            var size &#x3D; feature.get(&#x27;features&#x27;).length;

            if (size &gt; 1) {

              var styleDefault &#x3D; styleCache[size];
              if (!styleDefault) {
                var radius &#x3D; 10
                if (size &gt; 99) {
                  radius &#x3D; 12, 5
                }
                styleDefault &#x3D; new Style({

                  image: new CircleStyle({
                    radius: radius,

                    stroke: new Stroke({
                      color: &#x27;#fff&#x27;,
                      width: 2
                    }),
                    fill: new Fill({
                      color: environment.primaryColor,
                    })
                  }),
                  text: new Text({
                    text: size.toString(),
                    fill: new Fill({
                      color: &#x27;#fff&#x27;
                    }),
                    font: &#x27;12px sans-serif&#x27;,
                    offsetY: 1,
                    offsetX: -0.5
                  })
                });
                styleCache[size] &#x3D; styleDefault;
              }

              return [new Style({
                image: new Icon({
                  scale: couche.size,
                  src: couche.icon
                })
              }), styleDefault];

            } else if (size &#x3D;&#x3D; 1) {
              return new Style({
                image: new Icon({
                  scale: couche.size,
                  src: couche.icon
                })
              })

            } else if (size &#x3D;&#x3D; 0) {
              return
            }

          },
          /**
      * so that map.forEachLayerAtPixel work as expected
      * @see https://openlayers.org/en/latest/apidoc/module-ol_PluggableMap-PluggableMap.html#forEachLayerAtPixel
      */
          className: couche.nom + &#x27;___&#x27; + couche.type_layer
        });

      }


    }

    this.setPropertiesToLayer(layer,couche)

    if (couche.zindex) {
      this.setZindexToLayer(layer,couche.zindex)
    }

    if (couche.minzoom) {
      layer.setminResolution(this.map.getView().getResolutionForZoom(couche.minzoom))
    }

    if (couche.maxzoom) {
      layer.setmaxResolution(this.map.getView().getResolutionForZoom(couche.maxzoom))
    }

    layer.setVisible(couche.visible)

    return layer

  }

  /**
   * Set properties to a layer
   * @param layer
   * @param couche
   */
  setPropertiesToLayer(layer:any,couche:geosmLayer){
    if (layer instanceof LayerGroup) {
      for (let index &#x3D; 0; index &lt; layer.getLayers().getArray().length; index++) {
        const element &#x3D; layer.getLayers().getArray()[index];
        element.set(&#x27;properties&#x27;, couche.properties)
        element.set(&#x27;nom&#x27;, couche.nom)
        element.set(&#x27;type_layer&#x27;, couche.type_layer)
        element.set(&#x27;iconImagette&#x27;, couche.iconImagette)
        element.set(&#x27;identifiant&#x27;, couche.identifiant)
        element.set(&#x27;inToc&#x27;, couche.inToc)
        element.set(&#x27;tocCapabilities&#x27;, couche.tocCapabilities)
        element.set(&#x27;legendCapabilities&#x27;, couche.legendCapabilities)
        element.set(&#x27;descriptionSheetCapabilities&#x27;, couche.descriptionSheetCapabilities)
      }
    }

    layer.set(&#x27;properties&#x27;, couche.properties)
    layer.set(&#x27;nom&#x27;, couche.nom)
    layer.set(&#x27;type_layer&#x27;, couche.type_layer)
    layer.set(&#x27;iconImagette&#x27;, couche.iconImagette)
    layer.set(&#x27;identifiant&#x27;, couche.identifiant)
    layer.set(&#x27;inToc&#x27;, couche.inToc)
    layer.set(&#x27;tocCapabilities&#x27;, couche.tocCapabilities)
    layer.set(&#x27;legendCapabilities&#x27;, couche.legendCapabilities)
    layer.set(&#x27;descriptionSheetCapabilities&#x27;, couche.descriptionSheetCapabilities)

  }

  /**
   * Add any type of layer in the map
   * @param layer layer to add
   * @param group string name of layerGroup where we want to add the layer.
   */
  addLayerToMap(layer: VectorLayer | ImageLayer, group: string &#x3D; &#x27;principal&#x27;) {
    if (!layer.get(&#x27;nom&#x27;)) {
      throw new Error(&quot;Layer must have a &#x27;nom&#x27; properties&quot;);
    }

    if (!layer.get(&#x27;type_layer&#x27;)) {
      throw new Error(&quot;Layer must have a &#x27;type_layer&#x27; properties&quot;);
    }

    if (typeLayer.indexOf(layer.get(&#x27;type_layer&#x27;)) &#x3D;&#x3D; -1) {
      throw new Error(&quot;Layer must have a &#x27;type_layer&#x27; properties among &quot; + typeLayer.join(&#x27;,&#x27;));
    }

    var zIndex &#x3D; this.getMaxZindexInMap() + 1

    if (layer.get(&#x27;nom&#x27;) &amp;&amp; layer.get(&#x27;type_layer&#x27;)) {

      if (!layer.getZIndex()) {
        this.setZindexToLayer(layer,zIndex)
      }

      // var groupLayer &#x3D; this.getLayerGroupByNom(group)

      this.map.addLayer(layer)
      this.map.renderSync()
      // console.log(groupLayer)
      // groupLayer.getLayers().getArray().push(layer)

    }

  }
/**
 * set zIndex to a layer
 * @param layer any any type of layer
 * @param zIndex
 */
  setZindexToLayer(layer:any,zIndex:number){
    layer.setZIndex(zIndex)
    if (layer instanceof LayerGroup) {
      for (let index &#x3D; 0; index &lt; layer.getLayers().getArray().length; index++) {
        layer.getLayers().getArray()[index].setZIndex(zIndex);
      }
    }
  }

  /**
   *Get group layer by nom
   * @param groupName
   */
  getLayerGroupByNom(groupName: string): LayerGroup {
    var groupLayer &#x3D; undefined
    this.map.getLayers().forEach((group) &#x3D;&gt; {
      if (group instanceof LayerGroup) {

        if (group.get(&#x27;nom&#x27;) &#x3D;&#x3D; groupName) {
          groupLayer &#x3D; group
        }
      }
    });
    return groupLayer
  }

  /**
   * Get all layer in map
   */
  getAllLAyerInMap(): Array&lt;any&gt; {
    var responseLayers &#x3D; []
    this.map.getLayers().forEach((group) &#x3D;&gt; {
      responseLayers.push(group)
      // if (group instanceof LayerGroup) {
      //   responseLayers &#x3D; responseLayers.concat(group.getLayers().getArray())
      // } else {
      //   responseLayers.push(group)
      // }
    });
    return responseLayers
  }

  /**
   * Remove any type of layer in the map
   */
  removeLayerToMap(layer: VectorLayer | ImageLayer) {
    this.map.removeLayer(layer)
  }

  /**
   * Make a layer invisible in th map
   * @param layer
   */
  setLayerInvisible(layer: VectorLayer | ImageLayer) {
    layer.setVisible(false)
  }

  /**
   * Make a layer visible in th map
   * @param layer
   */
  setLayerVisible(layer: VectorLayer | ImageLayer) {
    layer.setVisible(true)
  }

  /**
   * Get list of layer by thier names
   * @param name string &#x27;nom&#x27; of layer to search
   * @param isLayerGroup boolean is the layeys we want are in a layergroup ?
   * @return Array&lt;any&gt;
   */
  getLayerByName(name: string, isLayerGroup: boolean &#x3D; false): Array&lt;any&gt; {
    var layer_to_remove &#x3D; []

    if (isLayerGroup) {
      var all_layers &#x3D; this.map.getLayers().getArray()
    } else {
      var all_layers &#x3D; this.map.getLayerGroup().getLayers().getArray()
    }

    for (let index &#x3D; 0; index &lt; all_layers.length; index++) {
      var layer &#x3D; all_layers[index]
      if (layer.get(&#x27;nom&#x27;) &#x3D;&#x3D; name) {
        layer_to_remove.push(layer)
      }

    }
    return layer_to_remove
  }

  /**
   * Get list of layer by thier names
   * @param properties Object properties of layer to search
   * @param isLayerGroup boolean is the layeys we want are in a layergroup ?
   * @return Array&lt;any&gt;
   */
  getLayerByProperties(properties: Object, isLayerGroup: boolean &#x3D; false): Array&lt;any&gt; {
    var layer_to_remove &#x3D; []

    if (isLayerGroup) {
      var all_layers &#x3D; this.map.getLayers().getArray()
    } else {
      var all_layers &#x3D; this.map.getLayerGroup().getLayers().getArray()
    }

    for (let index &#x3D; 0; index &lt; all_layers.length; index++) {
      var layer &#x3D; all_layers[index]
      var correspondanceLenght &#x3D; 0

      for (const key in properties) {
        if (properties.hasOwnProperty(key) &amp;&amp; layer.get(&#x27;properties&#x27;) &amp;&amp; layer.get(&#x27;properties&#x27;)[key] !&#x3D; undefined) {
          const element &#x3D; properties[key];
          if (properties[key] &#x3D;&#x3D; layer.get(&#x27;properties&#x27;)[key]) {
            correspondanceLenght &#x3D; correspondanceLenght + 1
          }
        }
      }

      if (Object.keys(properties).length &#x3D;&#x3D; correspondanceLenght) {
        layer_to_remove.push(layer)
      }

    }

    return layer_to_remove

  }

  /**
   * Get list of layer by properties of geosm catalogue
   * @param properties {group_id: number,couche_id: number,type:&#x27;couche&#x27;|&#x27;carte&#x27;} properties geosm catalogue of layer to search
   * @param isLayerGroup boolean is the layeys we want are in a layergroup ?
   * @return Array&lt;any&gt;
   */
  getLayerByPropertiesCatalogueGeosm(properties: { group_id: number, couche_id: number, type: &#x27;couche&#x27; | &#x27;carte&#x27; }): Array&lt;any&gt; {
    var layer_to_remove &#x3D; []
    var all_layers &#x3D; this.getAllLAyerInMap()
    for (let index &#x3D; 0; index &lt; all_layers.length; index++) {
      var layer &#x3D; all_layers[index]
      if (layer.get(&#x27;properties&#x27;)) {
        if (layer.get(&#x27;properties&#x27;)[&#x27;type&#x27;] &#x3D;&#x3D; properties.type &amp;&amp; layer.get(&#x27;properties&#x27;)[&#x27;group_id&#x27;] &#x3D;&#x3D; properties.group_id &amp;&amp; layer.get(&#x27;properties&#x27;)[&#x27;couche_id&#x27;] &#x3D;&#x3D; properties.couche_id) {
          layer_to_remove.push(layer)
        }
      }
    }

    return layer_to_remove
  }

  /**
   * Get all layers in the TOC.
   * Remark : all layer not in group group-layer-shadow
   * @return Array&lt;layersInMap&gt;
   */
  getAllLayersInToc(): Array&lt;layersInMap&gt; {
    var reponseLayers: Array&lt;layersInMap&gt; &#x3D; []
    var allLayers &#x3D; this.map.getLayers().getArray()

    for (let index &#x3D; 0; index &lt; allLayers.length; index++) {
      const layer &#x3D; allLayers[index];
      if (layer.get(&#x27;inToc&#x27;)) {
        reponseLayers.push(this.constructAlyerInMap(layer))
      }
    }

    return reponseLayers
  }

  /**
   * construct a layersInMap Object fron a layer in the map
   * @param layer any
   * @return layersInMap
   */
  constructAlyerInMap(layer: any): layersInMap {
    var data &#x3D; null
    var tocCapabilities: tocCapabilitiesInterface &#x3D; {} as tocCapabilitiesInterface
    if (layer.get(&#x27;tocCapabilities&#x27;)) {
      tocCapabilities.opacity &#x3D; layer.get(&#x27;tocCapabilities&#x27;)[&#x27;opacity&#x27;] !&#x3D; undefined ? layer.get(&#x27;tocCapabilities&#x27;)[&#x27;opacity&#x27;] : true
      tocCapabilities.share &#x3D; layer.get(&#x27;tocCapabilities&#x27;)[&#x27;share&#x27;] !&#x3D; undefined ? layer.get(&#x27;tocCapabilities&#x27;)[&#x27;share&#x27;] : true
      tocCapabilities.metadata &#x3D; layer.get(&#x27;tocCapabilities&#x27;)[&#x27;metadata&#x27;] !&#x3D; undefined ? layer.get(&#x27;tocCapabilities&#x27;)[&#x27;metadata&#x27;] : true
    } else {
      tocCapabilities.opacity &#x3D; true
      tocCapabilities.share &#x3D; true
      tocCapabilities.metadata &#x3D; true
    }

    return {
      tocCapabilities: tocCapabilities,
      legendCapabilities: layer.get(&#x27;legendCapabilities&#x27;),
      nom: layer.get(&#x27;nom&#x27;),
      type_layer: layer.get(&#x27;type_layer&#x27;),
      properties: layer.get(&#x27;properties&#x27;),
      image: layer.get(&#x27;iconImagette&#x27;),
      data: data,
      zIndex: layer.getZIndex(),
      visible: layer.getVisible(),
      layer: layer,
      descriptionSheetCapabilities: layer.get(&#x27;descriptionSheetCapabilities&#x27;)
    }
  }

  /**
   * Edit the zIndex of a layer:
   * Will set the Zindex of the layer and
   * - reduce by one all layer that Zindex are &lt; this layer
   * - increase by one all layer that zIndex are &gt; this layer
   * @param layer any layer to edit zindex
   * @param zIndex number
   */
  editZindexOfLayer(layer: any, zIndex: number) {
    for (let index &#x3D; 0; index &lt; this.getAllLayersInToc().length; index++) {
      const layerInmap &#x3D; this.getAllLayersInToc()[index].layer;

      console.log(layer.getZIndex(), zIndex)
      if (layer.getZIndex() &lt; zIndex) {
        // if the layer is going up
        if (layerInmap.getZIndex() &lt;&#x3D; zIndex) {
          this.setZindexToLayer(layerInmap,layerInmap.getZIndex() - 1)
        } else if (layerInmap.getZIndex() &gt; zIndex) {
          this.setZindexToLayer(layerInmap,layerInmap.getZIndex() + 1)
        }
      } else if (layer.getZIndex() &gt; zIndex) {
        // if the layer is going down
        if (layerInmap.getZIndex() &gt;&#x3D; zIndex) {
          this.setZindexToLayer(layerInmap,layerInmap.getZIndex() + 1)
        } else if (layerInmap.getZIndex() &lt; zIndex) {
          this.setZindexToLayer(layerInmap,layerInmap.getZIndex() - 1)
        }
      }
    }
    this.setZindexToLayer(layer,zIndex)
  }

  /**
   * Get max z index of map layers that are in the TOC
   * @return number
   */
  getMaxZindexInMap(): number {
    var allLayers &#x3D; this.map.getLayers().getArray()

    var allZindex &#x3D; [0]
    for (let index &#x3D; 0; index &lt; allLayers.length; index++) {
      var layer &#x3D; allLayers[index]

        try {
          if (layer.get(&#x27;inToc&#x27;)) {
            allZindex.push(layer.getZIndex())
          }
          // console.log(layer.get(&#x27;nom&#x27;),layer.getZIndex())
        } catch (error) {
          console.error(error)
        }

    }
    return Math.max(...allZindex)
  }


  /**
   * Detect all layers of type WMS (ImageLayer or TileLayer) on a pixel
   * We can also rempve layers that have certains values (oddLayersValues) for attributes (oddLayersAttr)
   * @param number[] pixel
   * @param string oddLayersAttr
   * @param Array&lt;string&gt; oddLayersValues
   * @returns Array&lt;ImageLayer&gt;
   */
  displayFeatureInfo(pixel: number[], oddLayersAttr: string, oddLayersValues: Array&lt;string&gt;): Array&lt;any&gt; {
    var layers &#x3D; []
    this.map.forEachLayerAtPixel(pixel,
      function (layer, rgb: Uint8ClampedArray) {

        if (layer) {

          if ( (layer instanceof ImageLayer || layer instanceof TileLayer) &amp;&amp; layer.get(&#x27;descriptionSheetCapabilities&#x27;) &amp;&amp; oddLayersValues.indexOf(layer.get(oddLayersAttr)) &#x3D;&#x3D; -1) {
            layers.push(layer)
          }
        }

      });

    return layers;
  }


  /**
    *click sur la carte
    *@param evt
    *@param (param :dataFromClickOnMapInterface)&#x3D;&gt;void
    */
  mapHasCliked(evt, callback: (param: dataFromClickOnMapInterface) &#x3D;&gt; void) {
    var pixel &#x3D; this.map.getEventPixel(evt.originalEvent);

    var feature &#x3D; this.map.forEachFeatureAtPixel(pixel,
      function (feature, layer) {
        return feature;
      }, {
      hitTolerance: 5
    });

    var layer &#x3D; this.map.forEachFeatureAtPixel(pixel,
      function (feature, layer) {
        if (layer instanceof VectorLayer) {
          return layer;
        }

      }, {
      hitTolerance: 5
    });

    var layers &#x3D; []

    if (!feature) {
      var all_pixels &#x3D; new manageDataHelper().calcHitMatrix(evt.pixel)
      for (let index &#x3D; 0; index &lt; all_pixels.length; index++) {
        var un_pixel &#x3D; all_pixels[index];
        var nom_layers_load &#x3D; []

        for (let i &#x3D; 0; i &lt; layers.length; i++) {
          nom_layers_load.push(layers[i].get(&#x27;nom&#x27;));
        }

        var layers_in_pixels &#x3D; this.displayFeatureInfo(un_pixel, &#x27;nom&#x27;, nom_layers_load)

        for (let j &#x3D; 0; j &lt; layers_in_pixels.length; j++) {
          layers.push(layers_in_pixels[j]);
        }

      }
    }

    if (layer instanceof VectorLayer &amp;&amp; feature ) {
      /**
       * if the user click on a cluser, and the cluster have more than one feature, we zoom in; but if ther is only one feature, we return the feature
       *
      */

      if (layer.getSource() instanceof Cluster) {
        var numberOfFeatureInCluster &#x3D; this.countFeaturesInCluster(feature.get(&#x27;features&#x27;));
        // console.log(layer,feature,numberOfFeatureInCluster)
        if (numberOfFeatureInCluster &gt; 1) {
          if (Object.create(feature.getGeometry()).getType() &#x3D;&#x3D; &#x27;Point&#x27;) {
            var coordinate &#x3D; Object.create(feature.getGeometry()).getCoordinates();
            var geom &#x3D; new Point(coordinate)
            this.fit_view(geom, this.map.getView().getZoom() + 2)
          }
        } else if (numberOfFeatureInCluster &#x3D;&#x3D; 1) {
          var feat &#x3D; this.getFeatureThatIsDisplayInCulster(feature.getProperties().features)
          var coord &#x3D; this.map.getCoordinateFromPixel(pixel)
          var data_callback: dataFromClickOnMapInterface &#x3D; {
            type: &#x27;vector&#x27;,
            data: {
              coord: coord,
              layers: [layer],
              feature: feat,
              data: {}
            }
          }

          callback(data_callback)
        }

      }

      // var coord &#x3D; this.map.getCoordinateFromPixel(pixel)
      // var data_callback: dataFromClickOnMapInterface &#x3D; {
      //   &#x27;type&#x27;: &#x27;clear_elem_geo_surbrillance&#x27;,
      //   data: {
      //     coord: coord,
      //     layers: layers
      //   }
      // }
      // callback(data_callback)

    } else if (layers.length &gt; 0) {
      var coord &#x3D; this.map.getCoordinateFromPixel(pixel)
      var data_callback: dataFromClickOnMapInterface &#x3D; {
        type: &#x27;raster&#x27;,
        data: {
          coord: coord,
          layers: layers
        }
      }
      console.log(data_callback)
      callback(data_callback)

    } else {
      var coord &#x3D; this.map.getCoordinateFromPixel(pixel)
      var data_callback: dataFromClickOnMapInterface &#x3D; {
        &#x27;type&#x27;: &#x27;clear&#x27;,
        data: {
          coord: coord,
          layers: layers
        }
      }
      callback(data_callback)
    }
  }

  /**
   * Count features in a cluster
   * @param features Feature
   * @return number
   */
  countFeaturesInCluster(features): number {
    var size &#x3D; 0;
    for (let index &#x3D; 0; index &lt; features.length; index++) {
      const feat &#x3D; features[index];
      // if (feat.get(&#x27;display&#x27;) &#x3D;&#x3D; true) {
      size &#x3D; size + 1
      // }
    }

    return size
  }

  /**
   * Get feature that is display in a cluster
   * @param Array&lt;Feature&gt; features
   * @retun Feature
   */
  getFeatureThatIsDisplayInCulster(features: Array&lt;Feature&gt;): Feature {
    var feature
    for (let index &#x3D; 0; index &lt; features.length; index++) {
      const feat &#x3D; features[index];
      // if (feat.get(&#x27;display&#x27;) &#x3D;&#x3D; true) {
      feature &#x3D; feat
      // }
    }
    return feature
  }


  /**
    * Récuperer les informations d&#x27;un feature wms
    * @param WMTS source
    * @param Array&lt;number&gt; coordinates  coodonnées
    */
  getFeatureInfoFromWmsSource(source: ImageWMS, coordinates: Array&lt;number&gt;) {
    var viewResolution &#x3D; this.map.getView().getResolution();
    var url &#x3D; source.getFeatureInfoUrl(coordinates, viewResolution, &#x27;EPSG:3857&#x27;) + &quot;&amp;WITH_GEOMETRY&#x3D;true&amp;INFO_FORMAT&#x3D;application/json&amp;FI_LINE_TOLERANCE&#x3D;17&amp;FI_POLYGON_TOLERANCE&#x3D;17&amp;FI_POINT_TOLERANCE&#x3D;17&quot;
    return url
  }

  /**
   * Find a layer querryBle in a layer group : a VectorLayer or TileLayer
   * @param layer LayerGroup
   * @return any the layer
   */
  getLayerQuerryBleInLayerGroup(layer:LayerGroup):any{
    if (layer instanceof LayerGroup) {
        for (let index &#x3D; 0; index &lt; layer.getLayers().getArray().length; index++) {
          const element &#x3D; layer.getLayers().getArray()[index];
          if (element instanceof TileLayer) {
            return element
          }else if(element instanceof VectorLayer){
            return element
          }
        }
    }else{
      return layer
    }
  }

  fit_view(geom, zoom, padding?) {
    // if (padding &#x3D;&#x3D; undefined) {
    //   padding &#x3D; this.get_padding_map()
    // }
    // this.map.getView().animate({zoom: zoom}, {center: geom.getCoordinates()});

    // console.log([this.map.getSize()[0]- $(&#x27;.sidenav-left&#x27;).width() , this.map.getSize()[1] ])
    this.map.getView().fit(geom, {
      &#x27;maxZoom&#x27;: zoom,
      &#x27;size&#x27;:this.map.getSize(),
      &#x27;padding&#x27;: [0, 0, 0, 0],
      &#x27;duration&#x27;: 500
    })

  }

}
</code></pre>
    </div>
</div>




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/menu.js"></script>
       <script src="../js/libs/highlight.pack.js"></script>
       <script src="../js/libs/highlightjs-line-numbers.min.js"></script>
       <script src="../js/search/search_index.js"></script>
       <script>
            document.addEventListener('DOMContentLoaded', function() {
                hljs.initHighlightingOnLoad();
                hljs.initLineNumbersOnLoad();
            });
       </script>

    </body>
</html>
